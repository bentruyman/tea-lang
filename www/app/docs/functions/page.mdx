# Functions

Functions are the building blocks of Tea programs. Learn how to define, call, and compose functions with type-safe parameters and return values.

## Defining Functions

Use the `def` keyword to define functions. Function parameters and return types are annotated.

<Card className="p-6 bg-card border-border mb-4">

### Basic Syntax

```tea
def greet(name: String) -> String
  `Hello, ${name}!`
end

# Call the function
@println(greet("Tea"))  # "Hello, Tea!"
```

</Card>

<Card className="p-6 bg-card border-border mb-4">

### Multiple Parameters

```tea
def add(a: Int, b: Int) -> Int
  a + b
end

def describe(name: String, age: Int) -> String
  `${name} is ${age} years old`
end

@println(add(2, 3))              # 5
@println(describe("Alice", 30))  # "Alice is 30 years old"
```

</Card>

<Card className="p-6 bg-card border-border">

### Void Return Type

Use `Void` for functions that don't return a value.

```tea
def print_greeting(name: String) -> Void
  @println(`Hello, ${name}!`)
end

print_greeting("World")
```

</Card>

## Return Values

The last expression in a function body is automatically returned. You can also use explicit `return` statements.

<Card className="p-6 bg-card border-border mb-4">

### Implicit Return

```tea
def square(x: Int) -> Int
  x * x  # Last expression is returned
end

def max(a: Int, b: Int) -> Int
  if(a > b) a else b  # If-expression is returned
end
```

</Card>

<Card className="p-6 bg-card border-border">

### Explicit Return

Use `return` for early exits or clarity.

```tea
def absolute(n: Int) -> Int
  if n < 0
    return -n
  end
  n
end

def find_index(items: List[String], target: String) -> Int
  var i = 0
  while i < @len(items)
    if items[i] == target
      return i
    end
    i = i + 1
  end
  -1  # Not found
end
```

</Card>

## Lambda Functions

Anonymous functions (lambdas) use the arrow syntax. They're useful for callbacks and functional programming.

<Card className="p-6 bg-card border-border mb-4">

### Basic Lambdas

```tea
# Lambda syntax: |params| => expression
const double = |x: Int| => x * 2
const add = |a: Int, b: Int| => a + b

@println(double(21))  # 42
@println(add(2, 3))   # 5
```

</Card>

<Card className="p-6 bg-card border-border mb-4">

### Closures

Lambdas can capture variables from their surrounding scope.

```tea
def make_adder(base: Int) -> Func(Int) -> Int
  |value: Int| => base + value  # Captures 'base'
end

var add_ten = make_adder(10)
var add_five = make_adder(5)

@println(add_ten(32))   # 42
@println(add_five(32))  # 37
```

</Card>

<Card className="p-6 bg-card border-border">

### Function Types

Functions have types written as `Func(params) -> return`.

```tea
# A function that takes an Int and returns an Int
const transform: Func(Int) -> Int = |x: Int| => x * 2

# A function that takes two Ints and returns a Bool
const compare: Func(Int, Int) -> Bool = |a: Int, b: Int| => a > b

# Higher-order function
def apply_twice(f: Func(Int) -> Int, x: Int) -> Int
  f(f(x))
end

@println(apply_twice(transform, 5))  # 20
```

</Card>

## Visibility

By default, functions are private to their module. Use `pub` to export them.

<CodeCard>
{`# Private function (only accessible in this module)
def helper(x: Int) -> Int
  x * 2
end

# Public function (can be imported by other modules)
pub def double(x: Int) -> Int
  helper(x)
end`}
</CodeCard>

## Documentation Comments

Use `##` for documentation comments that describe functions.

<CodeCard>
{`## Calculate the factorial of a non-negative integer.
##
## Examples:
##   factorial(5)  # => 120
##   factorial(0)  # => 1
pub def factorial(n: Int) -> Int
  if n <= 1
    return 1
  end
  n * factorial(n - 1)
end`}
</CodeCard>

## Recursion

Tea fully supports recursive functions.

<CodeCard>
{`def fibonacci(n: Int) -> Int
  if n <= 1
    return n
  end
  fibonacci(n - 1) + fibonacci(n - 2)
end

@println(fibonacci(10))  # 55`}
</CodeCard>

## Next Steps

<NextLink href="/docs/classes" title="Classes & Objects" description="Define custom types with structs" />
<NextLink href="/docs/generics" title="Generics" description="Write generic functions with type parameters" />
<NextLink href="/docs/error-handling" title="Error Handling" description="Handle errors with typed exceptions" />
